apiVersion: v1
kind: ConfigMap
metadata:
  name: toggle-vault-config
  namespace: toggle-vault
  labels:
    app.kubernetes.io/name: toggle-vault
    app.kubernetes.io/component: config
data:
  config.yaml: |
    # Toggle Vault Configuration
    # Values are populated from regional manifest.yaml
    
    azure:
      storage_account: "${STORAGE_ACCOUNT_NAME}"
      
      # Container scope (one of: container, containers, or scan_all_containers)
      ${CONTAINER_CONFIG}
      
      # Using Workload Identity - no credentials needed
      use_managed_identity: true
      prefix: "${STORAGE_PREFIX}"

    sync:
      interval: ${SYNC_INTERVAL}
      patterns:
        - "*.yaml"
        - "*.yml"

    database:
      path: "/data/toggle-vault.db"

    server:
      port: 8080
      host: "0.0.0.0"
